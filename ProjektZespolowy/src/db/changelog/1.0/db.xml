<?xml version="1.0" encoding="UTF-8"?>



<databaseChangeLog

  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
         <changeSet id="create database" author="nowaczq">
         	<createTable tableName = "products">
         		<column name="id" type="int" autoIncrement="true">
         			<constraints primaryKey="true" nullable="false"/>
         		</column>
         		<column name="product_name" type="varchar(70)" >
         			<constraints nullable="false"/>
         		</column>
         		<column name="proteins" type="int">
         			<constraints nullable="false"/>
         		</column>
         		<column name="carbonhydrates" type="int">
         			<constraints nullable="false"/>
         		</column>
         		<column name="fats" type="int">
         			<constraints nullable="false"/>
         		</column>
         	</createTable>

         	<createTable name="meal" >
         		<column name="id" type="int" autoIncrement="true">
         			<constraints primaryKey="true" nullable="false"/>
         		</column>
         		<column name="meal_name" type="varchar(50)" >
         			<constraints nullable="false"/>
         		</column>
         		<column name="time_of_meal" type="datetime" >
         			<constraints nullable="false"/>
         		</column>
         	</createTable>

         	<createTable name="product_meal">
         		<column name="meal_id" type="int">
         			<constraints nullable="false" foreignKeyName="fk_productmeal_meal" references="meal(id)"/>
         		</column>
         		<colum name="products_id" type="int">
         			<constraints nullable="false" foreignKeyName="fk_productmeal_products" references="products(id)"/>
         		</colum>
         	</createTable>

         	<createTable name="user">
         		<column name="id" type="int" autoIncrement="true">
         			<constraints primaryKey="true" nullable="false"/>
         		</column>
         		<column name="user_surname" type="varchar(40)" >
         			<constraints nullable="false"/>
         		</column>
         		<column  name="user_name" type="varchar(40)">
         			<constraints nullable="false" />
         		</column>
         		<column name="email" type="varchar(50)" >
         			<constraints nullable="false" />
         		</column>
         		<column name="password" type="int">
         			<constraints nullable="false" />
         		</column>
         		<column name="height" type="int" >
         			<constraints nullable="false" />
         		</column>
         		<column name="weight" type="int">
         			<constraints nullable="false"/>
         		</column>
         	</createTable>

         	<createTable name="diet">
         		<column name="id" type="int" autoIncrement="true">
         			<constraints primaryKey="true" nullable="false"/>
         		</column>
         		<column name="diet_type" type="varchar(50)">
         			<constraints nullable="false"/>
         		</column>
         		<column name="user_id" type="int" >
         			<constraints nullable="false" foreignKeyName="fk_user_diet" references="user(id)"/>
         		</column>
         		<column name="calories_index" type="int">
         			<constraints nullable="false"/>
         		</column>
         		<column name="proteins_index" type="int">
         			<constraints nullable="false"/>
         		</column>
         		<column name="fats_index" type="int">
         			<constraints nullable="false"/>
         		</column>
         	</createTable>

         	<createTable name="diet_meal">
         		<column name="meal_id" type="int">
         			<constraints nullable="false" foreignKeyName="fk_dietmeal_meal" references="meal(id)"/>
         		</column>
         		<colum name="diet_id" type="int">
         			<constraints nullable="false" foreignKeyName="fk_dietmeal_products" references="diet(id)"/>
         		</colum>
         	</createTable>

         	<createTable name="training">
         		<column name="id" type="int" autoIncrement="true">
         			<constraints primaryKey="true" nullable="false"/>
         		</column>
         		<column name="user_id" type="int" >
         			<constraints nullable="false" foreignKeyName="fk_user_training" references="user(id)"/>
         		</column>
         		<column name="time" type="time">
         			<constraints nullable="false"/>
         		</column>
         		<column name="date" type="datetime">
         			<constraints nullable="false"/>
         		</column>
         		<column name="gym_id" type="int" >
         			<constraints nullable="false" foreignKeyName="fk_gym_training" references="gym(id)"/>
         		</column>
         		<column name="burned_calories" type="int">
         			<constraints nullable="false"/>
         		</column>
         	</createTable>

         	<createTable name="gym">
         		<column name="id" type="int" autoIncrement="true">
         			<constraints primaryKey="true" nullable="false"/>
         		</column>
         		<column name="name" type="varchar(100)">
         			<constraints nullable="false"/>
         		</column>
         		<column name="street" type="varchar(100)">
         			<constraints nullable="false"/>
         		</column>
         		<column name="building_number" type="int">
         			<constraints nullable="false"/>
         		</column>
         		<column name="city" type="varchar(100)">
         			<constraints nullable="false"/>
         		</column>
         	</createTable>

         	<createTable name="excercise">
         		<column name="id" type="int" autoIncrement="true">
         			<constraints primaryKey="true" nullable="false"/>
         		</column>
         		<column name="name" type="varchar(50)">
         			<constraints nullable="false"/>
         		</column>
         		<column name="distance_id" type="int" >
         			<constraints  foreignKeyName="fk_distance_excercise" references="distance(id)"/>
         		</column>
         		<coulmn name="load" type="int">
         		</coulmn>
         		<column name="repetition_id" type="int" >
         			<constraints  foreignKeyName="fk_repetition_excercise" references="repetition(id)"/>
         		</column>
         		<column name="burned_calories" type="int">
         			<constraints nullable="false"/>
         		</column>
         	</createTable>

         	<createTable name="excercise_training">
         		<column name="training_id" type="int">
         			<constraints nullable="false" foreignKeyName="fk_excercisetraining_training" references="training(id)"/>
         		</column>
         		<colum name="excercise_id" type="int">
         			<constraints nullable="false" foreignKeyName="fk_excercisetraining_excercise" references="excercise(id)"/>
         		</colum>
         	</createTable>

         	<createTable name="distance">
         		<column name="id" type="int" autoIncrement="true">
         			<constraints primaryKey="true" nullable="false"/>
         		</column>
         		<column name="value" type="int">
         			<constraints nullable="false"/>
         		</column>
         	</createTable>

		<createTable name="load">
         		<column name="id" type="int" autoIncrement="true">
         			<constraints primaryKey="true" nullable="false"/>
         		</column>
         		<column name="repetition_amount" type="int">
         			<constraints nullable="false"/>
         		</column>
         		<column name="series_amount" type="int">
         			<constraints nullable="false"/>
         		</column>
         	</createTable>

         </changeSet>

</databaseChangeLog>
